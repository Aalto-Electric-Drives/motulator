

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>motulator.control.sm &#8212; motulator 0.1.7 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery-rendered-html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'autoapi/motulator/control/sm/index';</script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="motulator.model" href="../../model/index.html" />
    <link rel="prev" title="motulator.control.im" href="../im/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">motulator 0.1.7 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../usage.html">Usage</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../index.html">API Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.control</span></code></a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../im/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.control.im</span></code></a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.control.sm</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../model/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.model</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../model/im/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.model.im</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../model/sm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.model.sm</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">System Models</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../model/system.html">Drive System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../model/machines.html">Electric Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../model/mechanics.html">Mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../model/converters.html">Converters</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Control Methods</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../control/design_notes.html">Design Notes</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../control/speed_ctrl.html">Speed Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../control/current_ctrl.html">Current Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../control/observers.html">Observers</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../auto_examples/index.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../auto_examples/vector/index.html">Vector Control</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vector/plot_vector_ctrl_pmsm_2kw.html">2.2-kW PMSM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vector/plot_vector_ctrl_pmsm_2kw_diode.html">2.2-kW PMSM, diode bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vector/plot_vector_ctrl_syrm_7kw.html">6.7-kW SyRM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vector/plot_vector_ctrl_pmsyrm_thor.html">5-kW PM-SyRM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vector/plot_vector_ctrl_im_2kw.html">2.2-kW induction motor, saturated</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../auto_examples/vhz/index.html">V/Hz Control</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vhz/plot_vhz_ctrl_6step_im_2kw.html">2.2-kW induction motor, 6-step mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vhz/plot_vhz_ctrl_im_2kw.html">2.2-kW induction motor, diode bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/vhz/plot_vhz_ctrl_im_2kw_lc.html">2.2-kW induction motor, LC filter</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../auto_examples/obs_vhz/index.html">Observer-Based V/Hz Control</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/obs_vhz/plot_obs_vhz_ctrl_pmsm_2kw.html">2.2-kW PMSM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/obs_vhz/plot_obs_vhz_ctrl_im_2kw.html">2.2-kW induction motor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/obs_vhz/plot_obs_vhz_ctrl_syrm_7kw.html">6.7-kW SyRM, saturated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/obs_vhz/plot_obs_vhz_ctrl_pmsm_2kw_two_mass.html">2.2-kW PMSM, 2-mass mechanics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/obs_vhz/plot_obs_vhz_ctrl_pmsyrm_thor.html">5-kW PM-SyRM, flux maps from SyR-e</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../auto_examples/flux_vector/index.html">Flux-Vector Control</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/flux_vector/plot_flux_vector_pmsm_2kw.html">2.2-kW PMSM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/flux_vector/plot_flux_vector_syrm_7kw.html">6.7-kW SyRM, saturated, disturbance estimation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/flux_vector/plot_flux_vector_pmsyrm_5kw.html">5.5-kW PM-SyRM, saturated</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../auto_examples/signal_inj/index.html">Signal Injection</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/signal_inj/plot_signal_inj_pmsm_2kw.html">2.2-kW PMSM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../auto_examples/signal_inj/plot_signal_inj_syrm_7kw.html">6.7-kW SyRM</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/Aalto-Electric-Drives/motulator" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../_sources/autoapi/motulator/control/sm/index.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>motulator.control.sm</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#package-contents">Package Contents</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#classes">Classes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars.i_sd_mtpa"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars.i_sd_mtpa</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars.tau_M_lim"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars.tau_M_lim</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars.i_sd_lim"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars.i_sd_lim</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReference"><code class="docutils literal notranslate"><span class="pre">CurrentReference</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReference.output"><code class="docutils literal notranslate"><span class="pre">CurrentReference.output()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReference.update"><code class="docutils literal notranslate"><span class="pre">CurrentReference.update()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentCtrl"><code class="docutils literal notranslate"><span class="pre">CurrentCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentCtrl.output"><code class="docutils literal notranslate"><span class="pre">CurrentCtrl.output()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ModelPars"><code class="docutils literal notranslate"><span class="pre">ModelPars</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl"><code class="docutils literal notranslate"><span class="pre">VectorCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.current_ref"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.current_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.observer"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.observer</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.current_ctrl"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.current_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.speed_ctrl"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.speed_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.pwm"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.pwm</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.w_m_ref</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer"><code class="docutils literal notranslate"><span class="pre">Observer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.theta_m"><code class="docutils literal notranslate"><span class="pre">Observer.theta_m</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.w_m"><code class="docutils literal notranslate"><span class="pre">Observer.w_m</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.psi_s"><code class="docutils literal notranslate"><span class="pre">Observer.psi_s</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.psi_f"><code class="docutils literal notranslate"><span class="pre">Observer.psi_f</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.update"><code class="docutils literal notranslate"><span class="pre">Observer.update()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver"><code class="docutils literal notranslate"><span class="pre">FluxObserver</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver.delta"><code class="docutils literal notranslate"><span class="pre">FluxObserver.delta</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver.psi_s"><code class="docutils literal notranslate"><span class="pre">FluxObserver.psi_s</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver.update"><code class="docutils literal notranslate"><span class="pre">FluxObserver.update()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.observer"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.observer</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.flux_torque_ref"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.flux_torque_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.speed_ctrl"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.speed_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.w_m_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.pwm"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.pwm</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReference"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReference</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReferencePars"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReferencePars</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReferencePars.psi_s_mtpa"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReferencePars.psi_s_mtpa</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReferencePars.tau_M_lim"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReferencePars.tau_M_lim</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ObserverBasedVHzCtrl"><code class="docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ObserverBasedVHzCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrl.w_m_ref</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ObserverBasedVHzCtrlPars"><code class="docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrlPars</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.torque"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.torque()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.current"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.current()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.flux"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.flux()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpa"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpa()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv_current"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv_current()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpa_locus"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpa_locus()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv_locus"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv_locus()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.current_limit"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.current_limit()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv_and_current_limits"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv_and_current_limits()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_flux_loci"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_flux_loci()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_current_loci"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_current_loci()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_torque_current"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_torque_current()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_torque_flux"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_torque_flux()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.current_ctrl"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.current_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.speed_ctrl"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.speed_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.current_ref"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.current_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.pll"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.pll</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.signal_inj"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.signal_inj</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.w_m_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.pwm"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.pwm</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection"><code class="docutils literal notranslate"><span class="pre">SignalInjection</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection.output"><code class="docutils literal notranslate"><span class="pre">SignalInjection.output()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection.update"><code class="docutils literal notranslate"><span class="pre">SignalInjection.update()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection.filter_current"><code class="docutils literal notranslate"><span class="pre">SignalInjection.filter_current()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="module-motulator.control.sm">
<span id="motulator-control-sm"></span><h1><a class="reference internal" href="#module-motulator.control.sm" title="motulator.control.sm"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.control.sm</span></code></a><a class="headerlink" href="#module-motulator.control.sm" title="Permalink to this heading">#</a></h1>
<p>This package contains example controllers for synchronous machines.</p>
<section id="package-contents">
<h2>Package Contents<a class="headerlink" href="#package-contents" title="Permalink to this heading">#</a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.CurrentReferencePars" title="motulator.control.sm.CurrentReferencePars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CurrentReferencePars</span></code></a></p></td>
<td><p>Parameters for reference generation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#motulator.control.sm.CurrentReference" title="motulator.control.sm.CurrentReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CurrentReference</span></code></a></p></td>
<td><p>Current reference calculation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.CurrentCtrl" title="motulator.control.sm.CurrentCtrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CurrentCtrl</span></code></a></p></td>
<td><p>Current controller for synchronous machines.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ModelPars</span></code></a></p></td>
<td><p>Model parameters of a synchronous machine.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.VectorCtrl" title="motulator.control.sm.VectorCtrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VectorCtrl</span></code></a></p></td>
<td><p>Vector control for synchronous machine drives.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#motulator.control.sm.Observer" title="motulator.control.sm.Observer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Observer</span></code></a></p></td>
<td><p>Observer for synchronous machines in estimated rotor coordinates.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.FluxObserver" title="motulator.control.sm.FluxObserver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FluxObserver</span></code></a></p></td>
<td><p>Sensorless stator flux observer in external coordinates.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#motulator.control.sm.FluxVectorCtrl" title="motulator.control.sm.FluxVectorCtrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FluxVectorCtrl</span></code></a></p></td>
<td><p>Flux-vector control of synchronous machine drives.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.FluxTorqueReference" title="motulator.control.sm.FluxTorqueReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FluxTorqueReference</span></code></a></p></td>
<td><p>Flux and torque references.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#motulator.control.sm.FluxTorqueReferencePars" title="motulator.control.sm.FluxTorqueReferencePars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FluxTorqueReferencePars</span></code></a></p></td>
<td><p>Parameters for reference generation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.ObserverBasedVHzCtrl" title="motulator.control.sm.ObserverBasedVHzCtrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrl</span></code></a></p></td>
<td><p>Observer-based V/Hz control for synchronous motors.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#motulator.control.sm.ObserverBasedVHzCtrlPars" title="motulator.control.sm.ObserverBasedVHzCtrlPars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrlPars</span></code></a></p></td>
<td><p>Parameters for the control system.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.TorqueCharacteristics" title="motulator.control.sm.TorqueCharacteristics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TorqueCharacteristics</span></code></a></p></td>
<td><p>Compute MTPA and MTPV loci based on the machine parameters.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#motulator.control.sm.SignalInjectionCtrl" title="motulator.control.sm.SignalInjectionCtrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SignalInjectionCtrl</span></code></a></p></td>
<td><p>Sensorless control with signal injection for synchronous machine drives.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#motulator.control.sm.SignalInjection" title="motulator.control.sm.SignalInjection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SignalInjection</span></code></a></p></td>
<td><p>Estimate the rotor position error based on signal injection.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentReferencePars">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">CurrentReferencePars</span></span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#CurrentReferencePars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.CurrentReferencePars" title="Permalink to this definition">#</a></dt>
<dd><p>Parameters for reference generation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum stator current (A).</p></li>
<li><p><strong>psi_s_min</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum stator flux (Vs). The default is <cite>psi_f</cite>.</p></li>
<li><p><strong>w_m_nom</strong> (<em>float</em><em>, </em><em>optional</em>) – Nominal rotor angular speed (electrical rad/s). Needed if <cite>k_fw</cite> is not
directly provided.</p></li>
<li><p><strong>alpha_fw</strong> (<em>float</em><em>, </em><em>optional</em>) – Field-weakening bandwidth (rad/s). The default is 2*pi*20.</p></li>
<li><p><strong>k_fw</strong> (<em>float</em><em>, </em><em>optional</em>) – Field-weakening gain. The default is <cite>alpha_fw/(w_m_nom*par.L_d)</cite>.</p></li>
<li><p><strong>k_u</strong> (<em>float</em><em>, </em><em>optional</em>) – Voltage utilization factor. The default is 0.95.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentReferencePars.i_sd_mtpa">
<span class="sig-name descname"><span class="pre">i_sd_mtpa</span></span><a class="headerlink" href="#motulator.control.sm.CurrentReferencePars.i_sd_mtpa" title="Permalink to this definition">#</a></dt>
<dd><p>MTPA d-axis current (A) as a function of the torque (Nm).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentReferencePars.tau_M_lim">
<span class="sig-name descname"><span class="pre">tau_M_lim</span></span><a class="headerlink" href="#motulator.control.sm.CurrentReferencePars.tau_M_lim" title="Permalink to this definition">#</a></dt>
<dd><p>Torque limit (Nm) as a function of the stator flux linkage (Vs). This
limit merges the MTPV and current limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentReferencePars.i_sd_lim">
<span class="sig-name descname"><span class="pre">i_sd_lim</span></span><a class="headerlink" href="#motulator.control.sm.CurrentReferencePars.i_sd_lim" title="Permalink to this definition">#</a></dt>
<dd><p>d-axis current limit (A) as a function of the stator flux linkage (Vs).
This limit merges the MTPV and current limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentReference">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">CurrentReference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#CurrentReference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.CurrentReference" title="Permalink to this definition">#</a></dt>
<dd><p>Current reference calculation.</p>
<p>This method includes the MTPA locus and field-weakening operation based on
the unlimited voltage reference feedback. The MTPV and current limits are
taken into account. This resembles the method presented <a class="footnote-reference brackets" href="#bed2020" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>ref</strong> (<a class="reference internal" href="#motulator.control.sm.CurrentReferencePars" title="motulator.control.sm.CurrentReferencePars"><em>CurrentReferencePars</em></a>) – Reference generation parameters.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Instead of the PI controller used in <a class="footnote-reference brackets" href="#bed2020" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, we use a simpler integral
controller with a constant gain. The resulting operating-point-dependent
closed-loop pole could be derived using (12) of the paper. Unlike in
<a class="footnote-reference brackets" href="#bed2020" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, the MTPV limit is also included here by means of limiting the
reference torque and the d-axis current reference.</p>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="bed2020" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id3">3</a>)</span>
<p>Bedetti, Calligaro, Petrella, “Analytical design and
autotuning of adaptive flux-weakening voltage regulation loop in IPMSM
drives with accurate torque regulation,” IEEE Trans. Ind. Appl., 2020,
<a class="reference external" href="https://doi.org/10.1109/TIA.2019.2942807">https://doi.org/10.1109/TIA.2019.2942807</a></p>
</aside>
</aside>
<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentReference.output">
<span class="sig-name descname"><span class="pre">output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tau_M_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_dc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#CurrentReference.output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.CurrentReference.output" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the stator current reference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tau_M_ref</strong> (<em>float</em>) – Torque reference (Nm).</p></li>
<li><p><strong>w_m</strong> (<em>float</em>) – Rotor speed (electrical rad/s)</p></li>
<li><p><strong>u_dc</strong> (<em>float</em>) – DC-bus voltage (V).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>i_s_ref</strong> (<em>complex</em>) – Stator current reference (A).</p></li>
<li><p><strong>tau_M_ref_lim</strong> (<em>float</em>) – Limited torque reference (Nm).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentReference.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau_M_ref_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_s_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_dc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#CurrentReference.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.CurrentReference.update" title="Permalink to this definition">#</a></dt>
<dd><p>Field-weakening control based on the unlimited reference voltage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T_s</strong> (<em>float</em>) – Sampling period (s).</p></li>
<li><p><strong>tau_M_ref_lim</strong> (<em>float</em>) – Limited torque reference (Nm).</p></li>
<li><p><strong>u_s_ref</strong> (<em>complex</em>) – Unlimited stator voltage reference (V).</p></li>
<li><p><strong>u_dc</strong> (<em>float</em>) – DC-bus voltage (V).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentCtrl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">CurrentCtrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_c</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#CurrentCtrl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.CurrentCtrl" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="../_common/index.html#motulator.control._common.ComplexPICtrl" title="motulator.control._common.ComplexPICtrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">motulator.control._common.ComplexPICtrl</span></code></a></p>
<p>Current controller for synchronous machines.</p>
<p>This provides an interface of a current controller for synchronous machines
<a class="footnote-reference brackets" href="#awa2019a" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. The gains are initialized based on the desired closed-loop
bandwidth and the inductances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Synchronous machine parameters, should contain <cite>L_d</cite> and <cite>L_q</cite> (H).</p></li>
<li><p><strong>alpha_c</strong> (<em>float</em>) – Closed-loop bandwidth (rad/s).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="awa2019a" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>Awan, Saarakkala, Hinkkanen, “Flux-linkage-based current
control of saturated synchronous motors,” IEEE Trans. Ind. Appl. 2019,
<a class="reference external" href="https://doi.org/10.1109/TIA.2019.2919258">https://doi.org/10.1109/TIA.2019.2919258</a></p>
</aside>
</aside>
<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.CurrentCtrl.output">
<span class="sig-name descname"><span class="pre">output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#CurrentCtrl.output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.CurrentCtrl.output" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the controller output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_ref</strong> (<em>complex</em>) – Reference signal.</p></li>
<li><p><strong>i</strong> (<em>complex</em>) – Feedback signal.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>u</strong> – Controller output.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.ModelPars">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">ModelPars</span></span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#ModelPars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.ModelPars" title="Permalink to this definition">#</a></dt>
<dd><p>Model parameters of a synchronous machine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R_s</strong> (<em>float</em>) – Stator resistance (Ω).</p></li>
<li><p><strong>L_d</strong> (<em>float</em>) – d-axis inductance (H).</p></li>
<li><p><strong>L_q</strong> (<em>float</em>) – q-axis inductance (H).</p></li>
<li><p><strong>psi_f</strong> (<em>float</em>) – PM flux linkage (Vs).</p></li>
<li><p><strong>n_p</strong> (<em>int</em>) – Number of pole pairs.</p></li>
<li><p><strong>J</strong> (<em>float</em>) – Moment of inertia (kgm²).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.VectorCtrl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">VectorCtrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T_s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.00025</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensorless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_vector.html#VectorCtrl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.VectorCtrl" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="../_common/index.html#motulator.control._common.Ctrl" title="motulator.control._common.Ctrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">motulator.control._common.Ctrl</span></code></a></p>
<p>Vector control for synchronous machine drives.</p>
<p>This class interconnects the subsystems of the control system and provides
the interface to the solver.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>ref</strong> (<em>ReferencePars</em>) – Reference generation parameters.</p></li>
<li><p><strong>T_s</strong> (<em>float</em><em>, </em><em>optional</em>) – Sampling period (s). The default is 250e-6.</p></li>
<li><p><strong>sensorless</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, sensorless control is used. The default is True.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.VectorCtrl.current_ref">
<span class="sig-name descname"><span class="pre">current_ref</span></span><a class="headerlink" href="#motulator.control.sm.VectorCtrl.current_ref" title="Permalink to this definition">#</a></dt>
<dd><p>Current reference generator.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.CurrentReference" title="motulator.control.sm.CurrentReference">CurrentReference</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.VectorCtrl.observer">
<span class="sig-name descname"><span class="pre">observer</span></span><a class="headerlink" href="#motulator.control.sm.VectorCtrl.observer" title="Permalink to this definition">#</a></dt>
<dd><p>Flux and rotor position observer, used in the sensorless mode only.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.Observer" title="motulator.control.sm.Observer">Observer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.VectorCtrl.current_ctrl">
<span class="sig-name descname"><span class="pre">current_ctrl</span></span><a class="headerlink" href="#motulator.control.sm.VectorCtrl.current_ctrl" title="Permalink to this definition">#</a></dt>
<dd><p>Current controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.CurrentCtrl" title="motulator.control.sm.CurrentCtrl">CurrentCtrl</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.VectorCtrl.speed_ctrl">
<span class="sig-name descname"><span class="pre">speed_ctrl</span></span><a class="headerlink" href="#motulator.control.sm.VectorCtrl.speed_ctrl" title="Permalink to this definition">#</a></dt>
<dd><p>Speed controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../_common/index.html#motulator.control._common.SpeedCtrl" title="motulator.control._common.SpeedCtrl">SpeedCtrl</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.VectorCtrl.pwm">
<span class="sig-name descname"><span class="pre">pwm</span></span><a class="headerlink" href="#motulator.control.sm.VectorCtrl.pwm" title="Permalink to this definition">#</a></dt>
<dd><p>Pulse-width modulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../_common/index.html#motulator.control._common.PWM" title="motulator.control._common.PWM">PWM</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.VectorCtrl.w_m_ref">
<span class="sig-name descname"><span class="pre">w_m_ref</span></span><a class="headerlink" href="#motulator.control.sm.VectorCtrl.w_m_ref" title="Permalink to this definition">#</a></dt>
<dd><p>Speed reference (electrical rad/s) as a function of time (s).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.Observer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">Observer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_o</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">np.pi</span> <span class="pre">*</span> <span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensorless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_observers.html#Observer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.Observer" title="Permalink to this definition">#</a></dt>
<dd><p>Observer for synchronous machines in estimated rotor coordinates.</p>
<p>This observer estimates the stator flux linkage, the rotor angle, the rotor
speed, and (optionally) the PM-flux linkage. The design is based on
<a class="footnote-reference brackets" href="#hin2018" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> and [#Tuo2018]. The observer gain decouples the electrical and
mechanical dynamics and allows placing the poles of the corresponding
linearized estimation error dynamics. The PM-flux linkage can also be
estimated <a class="footnote-reference brackets" href="#tuo2018" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>. This implementation operates in estimated rotor
coordinates. The observer can  also be used in the sensored mode by
providing the measured rotor speed as an input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>alpha_o</strong> (<em>float</em><em>, </em><em>optional</em>) – Observer bandwidth (electrical rad/s). The default is 2*pi*40.</p></li>
<li><p><strong>k</strong> (<em>callable</em><em>, </em><em>optional</em>) – Observer gain as a function of the rotor angular speed. The default is
<code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">w_m:</span> <span class="pre">0.25*(R_s*(L_d</span> <span class="pre">+</span> <span class="pre">L_q)/(L_d*L_q)</span> <span class="pre">+</span> <span class="pre">0.2*abs(w_m))</span></code> if
<cite>sensorless</cite> else <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">w_m:</span> <span class="pre">2*pi*15</span></code>.</p></li>
<li><p><strong>k_f</strong> (<em>callable</em><em>, </em><em>optional</em>) – PM-flux estimation gain (V) as a function of the rotor angular speed.
The default is zero, <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">w_m:</span> <span class="pre">0</span></code>. A typical nonzero gain is of
the form <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">w_m:</span> <span class="pre">max(k*(abs(w_m)</span> <span class="pre">-</span> <span class="pre">w_min),</span> <span class="pre">0)</span></code>, i.e., zero below
the speed <cite>w_min</cite> (rad/s) and linearly increasing above that with the
slope <cite>k</cite> (Vs).</p></li>
<li><p><strong>sensorless</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, sensorless control is used. The default is True.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.Observer.theta_m">
<span class="sig-name descname"><span class="pre">theta_m</span></span><a class="headerlink" href="#motulator.control.sm.Observer.theta_m" title="Permalink to this definition">#</a></dt>
<dd><p>Rotor angle estimate (electrical rad).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.Observer.w_m">
<span class="sig-name descname"><span class="pre">w_m</span></span><a class="headerlink" href="#motulator.control.sm.Observer.w_m" title="Permalink to this definition">#</a></dt>
<dd><p>Rotor speed estimate (electrical rad/s).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.Observer.psi_s">
<span class="sig-name descname"><span class="pre">psi_s</span></span><a class="headerlink" href="#motulator.control.sm.Observer.psi_s" title="Permalink to this definition">#</a></dt>
<dd><p>Stator flux estimate (Vs).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.Observer.psi_f">
<span class="sig-name descname"><span class="pre">psi_f</span></span><a class="headerlink" href="#motulator.control.sm.Observer.psi_f" title="Permalink to this definition">#</a></dt>
<dd><p>PM-flux estimate (Vs). The PM-flux estimate lumps various disturbances.
Hence, it can become slightly negative in the case of SyRMs.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>The sensored mode assumes that the control system operates in the measured
rotor coordinates, i.e., the rotor-angle tracking is disabled.</p>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="hin2018" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">3</a><span class="fn-bracket">]</span></span>
<p>Hinkkanen, Saarakkala, Awan, Mölsä, Tuovinen, “Observers for
sensorless synchronous motor drives: Framework for design and analysis,”
IEEE Trans. Ind. Appl., 2018, <a class="reference external" href="https://doi.org/10.1109/TIA.2018.2858753">https://doi.org/10.1109/TIA.2018.2858753</a></p>
</aside>
<aside class="footnote brackets" id="tuo2018" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">4</a><span class="fn-bracket">]</span></span>
<p>Tuovinen, Awan, Kukkola, Saarakkala, Hinkkanen, “Permanent-
magnet flux adaptation for sensorless synchronous motor drives,” Proc.
IEEE SLED, 2018, <a class="reference external" href="https://doi.org/10.1109/SLED.2018.8485899">https://doi.org/10.1109/SLED.2018.8485899</a></p>
</aside>
</aside>
<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.Observer.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_m</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_observers.html#Observer.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.Observer.update" title="Permalink to this definition">#</a></dt>
<dd><p>Update the states for the next sampling period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T_s</strong> (<em>float</em>) – Sampling period (s).</p></li>
<li><p><strong>u_s</strong> (<em>complex</em>) – Stator voltage (V) in estimated rotor coordinates.</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current (A) in estimated rotor coordinates.</p></li>
<li><p><strong>w_m</strong> (<em>float</em><em>, </em><em>optional</em>) – Rotor angular speed (electrical rad/s). Needed only in the sensored
mode. The default is None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.FluxObserver">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">FluxObserver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_o</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">np.pi</span> <span class="pre">*</span> <span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zeta_inf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_observers.html#FluxObserver"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.FluxObserver" title="Permalink to this definition">#</a></dt>
<dd><p>Sensorless stator flux observer in external coordinates.</p>
<p>This observer estimates the stator flux linkage and the angle of the
coordinate system with respect to the d-axis of the rotor. Speed-estimation
is omitted. The observer gain decouples the electrical and mechanical
dynamics and allows placing the poles of the corresponding linearized
estimation error dynamics. This implementation operates in external
coordinates (typically synchronous coordinates defined by reference signals
of a control system).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>alpha_o</strong> (<em>float</em><em>, </em><em>optional</em>) – Observer gain (rad/s). The default is 2*pi*20.</p></li>
<li><p><strong>zeta_inf</strong> (<em>float</em><em>, </em><em>optional</em>) – Damping ratio at infinite speed. The default is 0.2.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxObserver.delta">
<span class="sig-name descname"><span class="pre">delta</span></span><a class="headerlink" href="#motulator.control.sm.FluxObserver.delta" title="Permalink to this definition">#</a></dt>
<dd><p>Angle estimate of the coordinate system with respect to the d-axis of
the rotor (electrical rad).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxObserver.psi_s">
<span class="sig-name descname"><span class="pre">psi_s</span></span><a class="headerlink" href="#motulator.control.sm.FluxObserver.psi_s" title="Permalink to this definition">#</a></dt>
<dd><p>Stator flux estimate (Vs).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.FluxObserver.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_observers.html#FluxObserver.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.FluxObserver.update" title="Permalink to this definition">#</a></dt>
<dd><p>Update the states for the next sampling period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T_s</strong> (<em>float</em>) – Sampling period (s).</p></li>
<li><p><strong>u_s</strong> (<em>complex</em>) – Stator voltage (V).</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current (A).</p></li>
<li><p><strong>w_s</strong> (<em>float</em>) – Stator angular frequency (rad/s).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.FluxVectorCtrl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">FluxVectorCtrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">np.pi</span> <span class="pre">*</span> <span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">np.pi</span> <span class="pre">*</span> <span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T_s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.00025</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensorless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_flux_vector.html#FluxVectorCtrl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.FluxVectorCtrl" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="../_common/index.html#motulator.control._common.Ctrl" title="motulator.control._common.Ctrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">motulator.control._common.Ctrl</span></code></a></p>
<p>Flux-vector control of synchronous machine drives.</p>
<p>This class implements a variant of stator-flux-vector control <a class="footnote-reference brackets" href="#pel2009" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>.
Rotor coordinates as well as decoupling between the stator flux and torque
channels are used according to <a class="footnote-reference brackets" href="#awa2019b" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a>. Here, the stator flux
magnitude and the electromagnetic torque are selected as controllable
variables.</p>
<p class="rubric">Notes</p>
<p>Proportional controllers are used for simplicity. The magnetic saturation
is not considered in this implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>ref</strong> (<a class="reference internal" href="#motulator.control.sm.FluxTorqueReferencePars" title="motulator.control.sm.FluxTorqueReferencePars"><em>FluxTorqueReferencePars</em></a>) – Reference generation parameters.</p></li>
<li><p><strong>alpha_psi</strong> (<em>float</em><em>, </em><em>optional</em>) – Bandwidth of the flux controller (rad/s). The default is 2*pi*100.</p></li>
<li><p><strong>alpha_tau</strong> (<em>float</em><em>, </em><em>optional</em>) – Bandwidth of the torque controller (rad/s). The default is 2*pi*200.</p></li>
<li><p><strong>T_s</strong> (<em>float</em>) – Sampling period (s). The default is 250e-6.</p></li>
<li><p><strong>sensorless</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, sensorless control is used. The default is True.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxVectorCtrl.observer">
<span class="sig-name descname"><span class="pre">observer</span></span><a class="headerlink" href="#motulator.control.sm.FluxVectorCtrl.observer" title="Permalink to this definition">#</a></dt>
<dd><p>Flux observer, having both sensorless and sensored modes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.Observer" title="motulator.control.sm.Observer">Observer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxVectorCtrl.flux_torque_ref">
<span class="sig-name descname"><span class="pre">flux_torque_ref</span></span><a class="headerlink" href="#motulator.control.sm.FluxVectorCtrl.flux_torque_ref" title="Permalink to this definition">#</a></dt>
<dd><p>Flux and torque reference generator.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.FluxTorqueReference" title="motulator.control.sm.FluxTorqueReference">FluxTorqueReference</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxVectorCtrl.speed_ctrl">
<span class="sig-name descname"><span class="pre">speed_ctrl</span></span><a class="headerlink" href="#motulator.control.sm.FluxVectorCtrl.speed_ctrl" title="Permalink to this definition">#</a></dt>
<dd><p>Speed controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../_common/index.html#motulator.control._common.SpeedCtrl" title="motulator.control._common.SpeedCtrl">SpeedCtrl</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxVectorCtrl.w_m_ref">
<span class="sig-name descname"><span class="pre">w_m_ref</span></span><a class="headerlink" href="#motulator.control.sm.FluxVectorCtrl.w_m_ref" title="Permalink to this definition">#</a></dt>
<dd><p>Speed reference (electrical rad/s) as a function of time (s).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxVectorCtrl.pwm">
<span class="sig-name descname"><span class="pre">pwm</span></span><a class="headerlink" href="#motulator.control.sm.FluxVectorCtrl.pwm" title="Permalink to this definition">#</a></dt>
<dd><p>Pulse-width modulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../_common/index.html#motulator.control._common.PWM" title="motulator.control._common.PWM">PWM</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="pel2009" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">5</a><span class="fn-bracket">]</span></span>
<p>Pellegrino, Armando, Guglielmi, “Direct flux field-oriented
control of IPM drives with variable DC link in the field-weakening
region,” IEEE Trans.Ind. Appl., 2009,
<a class="reference external" href="https://doi.org/10.1109/TIA.2009.2027167">https://doi.org/10.1109/TIA.2009.2027167</a></p>
</aside>
<aside class="footnote brackets" id="awa2019b" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">6</a><span class="fn-bracket">]</span></span>
<p>Awan, Hinkkanen, Bojoi, Pellegrino, “Stator-flux-oriented
control of synchronous motors: A systematic design procedure,” IEEE
Trans. Ind. Appl., 2019, <a class="reference external" href="https://doi.org/10.1109/TIA.2019.2927316">https://doi.org/10.1109/TIA.2019.2927316</a></p>
</aside>
</aside>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.FluxTorqueReference">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">FluxTorqueReference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_flux_vector.html#FluxTorqueReference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.FluxTorqueReference" title="Permalink to this definition">#</a></dt>
<dd><p>Flux and torque references.</p>
<p>The current and MTPV limits as well as the MTPA locus are implemented as
look-up tables, which are generated based on the constant machine model
parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ref</strong> (<a class="reference internal" href="#motulator.control.sm.FluxTorqueReferencePars" title="motulator.control.sm.FluxTorqueReferencePars"><em>FluxTorqueReferencePars</em></a>) – Reference generation parameters.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.FluxTorqueReferencePars">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">FluxTorqueReferencePars</span></span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_flux_vector.html#FluxTorqueReferencePars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.FluxTorqueReferencePars" title="Permalink to this definition">#</a></dt>
<dd><p>Parameters for reference generation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum stator current (A).</p></li>
<li><p><strong>psi_s_min</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum stator flux (Vs). The default is <cite>psi_f</cite>.</p></li>
<li><p><strong>psi_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum stator flux (Vs). The default is inf.</p></li>
<li><p><strong>k_u</strong> (<em>float</em><em>, </em><em>optional</em>) – Voltage utilization factor. The default is 0.95.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxTorqueReferencePars.psi_s_mtpa">
<span class="sig-name descname"><span class="pre">psi_s_mtpa</span></span><a class="headerlink" href="#motulator.control.sm.FluxTorqueReferencePars.psi_s_mtpa" title="Permalink to this definition">#</a></dt>
<dd><p>MTPA stator flux linkage (Vs) as a function of the torque (Nm).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.FluxTorqueReferencePars.tau_M_lim">
<span class="sig-name descname"><span class="pre">tau_M_lim</span></span><a class="headerlink" href="#motulator.control.sm.FluxTorqueReferencePars.tau_M_lim" title="Permalink to this definition">#</a></dt>
<dd><p>Torque limit (Nm) as a function of the stator flux linkage (Vs). This
limit merges the MTPV and current limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.ObserverBasedVHzCtrl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">ObserverBasedVHzCtrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctrl_par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T_s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.00025</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_obs_vhz.html#ObserverBasedVHzCtrl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.ObserverBasedVHzCtrl" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="../_common/index.html#motulator.control._common.Ctrl" title="motulator.control._common.Ctrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">motulator.control._common.Ctrl</span></code></a></p>
<p>Observer-based V/Hz control for synchronous motors.</p>
<p>This observer-based V/Hz control control method is based on <a class="footnote-reference brackets" href="#tii2022" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>ctrl_par</strong> (<a class="reference internal" href="#motulator.control.sm.ObserverBasedVHzCtrlPars" title="motulator.control.sm.ObserverBasedVHzCtrlPars"><em>ObserverBasedVHzCtrlPars</em></a>) – Control system parameters.</p></li>
<li><p><strong>T_s</strong> (<em>float</em><em>, </em><em>optional</em>) – Sampling period (s). The default is 250e-6.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.ObserverBasedVHzCtrl.w_m_ref">
<span class="sig-name descname"><span class="pre">w_m_ref</span></span><a class="headerlink" href="#motulator.control.sm.ObserverBasedVHzCtrl.w_m_ref" title="Permalink to this definition">#</a></dt>
<dd><p>Rotor speed reference (electrical rad/s).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="tii2022" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">7</a><span class="fn-bracket">]</span></span>
<p>Tiitinen, Hinkkanen, Kukkola, Routimo, Pellegrino, Harnefors,
“Stable and passive observer-based V/Hz control for synchronous Motors,”
Proc. IEEE ECCE, 2022, <a class="reference external" href="https://doi.org/10.1109/ECCE50734.2022.9947858">https://doi.org/10.1109/ECCE50734.2022.9947858</a></p>
</aside>
</aside>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.ObserverBasedVHzCtrlPars">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">ObserverBasedVHzCtrlPars</span></span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_obs_vhz.html#ObserverBasedVHzCtrlPars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.ObserverBasedVHzCtrlPars" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="_flux_vector/index.html#motulator.control.sm._flux_vector.FluxTorqueReferencePars" title="motulator.control.sm._flux_vector.FluxTorqueReferencePars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">motulator.control.sm._flux_vector.FluxTorqueReferencePars</span></code></a></p>
<p>Parameters for the control system.</p>
<p>This class extends FluxTorqueReferencePars with the parameters needed for
the observer-based V/Hz control.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alpha_psi</strong> (<em>float</em><em>, </em><em>optional</em>) – Flux control bandwidth (rad/s). The default is 2*pi*50.</p></li>
<li><p><strong>alpha_tau</strong> (<em>float</em>) – Torque control bandwidth (rad/s). The default is 2*pi*50.</p></li>
<li><p><strong>alpha_f</strong> (<em>float</em><em>, </em><em>optional</em>) – Bandwidth of the high-pass filter (rad/s). The default is 2*pi*1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">TorqueCharacteristics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics" title="Permalink to this definition">#</a></dt>
<dd><p>Compute MTPA and MTPV loci based on the machine parameters.</p>
<p>The magnetic saturation is omitted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.torque">
<span class="sig-name descname"><span class="pre">torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psi_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.torque"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.torque" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the torque as a function of the stator flux linkage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux (Vs).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>tau_M</strong> – Electromagnetic torque (Nm).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.current">
<span class="sig-name descname"><span class="pre">current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psi_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.current" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the stator current as a function of the stator flux linkage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux linkage (Vs).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>i_s</strong> – Stator current (A).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.flux">
<span class="sig-name descname"><span class="pre">flux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.flux"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.flux" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the stator flux linkage as a function of the current.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>i_s</strong> (<em>complex</em>) – Stator current (A).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>psi_s</strong> – Stator flux linkage (Vs).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.mtpa">
<span class="sig-name descname"><span class="pre">mtpa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_i_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.mtpa"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.mtpa" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the MTPA stator current angle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>abs_i_s</strong> (<em>float</em>) – Stator current magnitude (A).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>beta</strong> – MTPA angle of the stator current vector (electrical rad).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.mtpv">
<span class="sig-name descname"><span class="pre">mtpv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_psi_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.mtpv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.mtpv" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the MTPV stator flux angle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>abs_psi_s</strong> (<em>float</em>) – Stator flux magnitude (Vs).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>delta</strong> – MTPV angle of the stator flux vector (electrical rad).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.mtpv_current">
<span class="sig-name descname"><span class="pre">mtpv_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_i_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.mtpv_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.mtpv_current" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the MTPV based on the current magnitude.</p>
<p>This computes the MTPV based on the current magnitude, i.e., the
intersection of the MTPV current locus and the current limit circle.
This method is not necessary for computing the control look-up tables.
It is used here to “cut” the MTPV characteristics at the desired
current. Alternatively just a large enough maximum flux magnitude could
be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>abs_i_s</strong> (<em>float</em>) – Stator current magnitude (A).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>i_s</strong> – MTPV stator current (A).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.mtpa_locus">
<span class="sig-name descname"><span class="pre">mtpa_locus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi_s_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.mtpa_locus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.mtpa_locus" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the MTPA locus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum stator current magnitude (A) at which the locus is
computed.</p></li>
<li><p><strong>psi_s_min</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum stator flux magnitude (Vs) at which the locus is computed.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux (Vs).</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current (A).</p></li>
<li><p><strong>tau_M</strong> (<em>float</em>) – Electromagnetic torque (Nm).</p></li>
<li><p><strong>abs_psi_s_vs_tau_M</strong> (<em>callable</em>) – Stator flux magnitude (Vs) as a function of the torque (Nm).</p></li>
<li><p><strong>i_sd_vs_tau_M</strong> (<em>callable</em>) – d-axis current (A) as a function of the torque (Nm).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.mtpv_locus">
<span class="sig-name descname"><span class="pre">mtpv_locus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psi_s_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.mtpv_locus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.mtpv_locus" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the MTPV locus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>psi_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum stator flux magnitude (Vs) at which the locus is computed.
Either <cite>psi_s_max</cite> or <cite>i_s_max</cite> must be given.</p></li>
<li><p><strong>i_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum stator current magnitude (A) at which the locus is
computed.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux (Vs).</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current (A).</p></li>
<li><p><strong>tau_M</strong> (<em>float</em>) – Electromagnetic torque (Nm).</p></li>
<li><p><strong>tau_M_vs_abs_psi_s</strong> (<em>interp1d object</em>) – Torque (Nm) as a function of the flux magnitude (Vs).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.current_limit">
<span class="sig-name descname"><span class="pre">current_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">np.pi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.current_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.current_limit" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the current limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Current limit (A).</p></li>
<li><p><strong>gamma1</strong> (<em>float</em><em>, </em><em>optional</em>) – Starting angle (electrical rad). The default is 0.</p></li>
<li><p><strong>gamma2</strong> (<em>float</em><em>, </em><em>optional</em>) – End angle (electrical rad). The defauls in pi.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux (Vs).</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current (A).</p></li>
<li><p><strong>tau_M</strong> (<em>float</em>) – Electromagnetic torque (Nm).</p></li>
<li><p><strong>tau_M_vs_abs_psi_s</strong> (<em>interp1d object</em>) – Torque (Nm) as a function of the flux magnitude (Vs).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.mtpv_and_current_limits">
<span class="sig-name descname"><span class="pre">mtpv_and_current_limits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.mtpv_and_current_limits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.mtpv_and_current_limits" title="Permalink to this definition">#</a></dt>
<dd><p>Merge the MTPV and current limits into a single interpolant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Current limit (A).</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>tau_M_vs_abs_psi_s</strong> (<em>interp1d object</em>) – Torque (Nm) as a function of the flux magnitude (Vs).</p></li>
<li><p><strong>i_sd_vs_tau_M</strong> (<em>interp1d object</em>) – d-axis current (A) as a function of the torque (Nm).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.plot_flux_loci">
<span class="sig-name descname"><span class="pre">plot_flux_loci</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.plot_flux_loci"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.plot_flux_loci" title="Permalink to this definition">#</a></dt>
<dd><p>Plot the stator flux linkage loci.</p>
<p>Per-unit quantities are used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current (A) at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<a class="reference internal" href="../../_helpers/index.html#motulator._helpers.BaseValues" title="motulator._helpers.BaseValues"><em>BaseValues</em></a>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.plot_current_loci">
<span class="sig-name descname"><span class="pre">plot_current_loci</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.plot_current_loci"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.plot_current_loci" title="Permalink to this definition">#</a></dt>
<dd><p>Plot the current loci.</p>
<p>Per-unit quantities are used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current (A) at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<a class="reference internal" href="../../_helpers/index.html#motulator._helpers.BaseValues" title="motulator._helpers.BaseValues"><em>BaseValues</em></a>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.plot_torque_current">
<span class="sig-name descname"><span class="pre">plot_torque_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.plot_torque_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.plot_torque_current" title="Permalink to this definition">#</a></dt>
<dd><p>Plot torque vs. current characteristics.</p>
<p>Per-unit quantities are used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current (A) at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<a class="reference internal" href="../../_helpers/index.html#motulator._helpers.BaseValues" title="motulator._helpers.BaseValues"><em>BaseValues</em></a>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.TorqueCharacteristics.plot_torque_flux">
<span class="sig-name descname"><span class="pre">plot_torque_flux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_torque.html#TorqueCharacteristics.plot_torque_flux"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.TorqueCharacteristics.plot_torque_flux" title="Permalink to this definition">#</a></dt>
<dd><p>Plot torque vs. flux magnitude characteristics.</p>
<p>Per-unit quantities are used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current (A) at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<a class="reference internal" href="../../_helpers/index.html#motulator._helpers.BaseValues" title="motulator._helpers.BaseValues"><em>BaseValues</em></a>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">SignalInjectionCtrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T_s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.00025</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_signal_inj.html#SignalInjectionCtrl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="../_common/index.html#motulator.control._common.Ctrl" title="motulator.control._common.Ctrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">motulator.control._common.Ctrl</span></code></a></p>
<p>Sensorless control with signal injection for synchronous machine drives.</p>
<p>This class implements a square-wave signal injection for low-speed
operation according to <a class="footnote-reference brackets" href="#kim2012" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a>. A phase-locked loop is used to track
the rotor position.</p>
<p class="rubric">Notes</p>
<p>For a wider speed range, signal injection could be combined to a
model-based observer. The effects of magnetic saturation are not
compensated for in this version.</p>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="kim2012" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">8</a><span class="fn-bracket">]</span></span>
<p>Kim, Ha, Sul, “PWM switching frequency signal injection
sensorless method in IPMSM,” IEEE Trans. Ind. Appl., 2012,
<a class="reference external" href="https://doi.org/10.1109/TIA.2012.2210175">https://doi.org/10.1109/TIA.2012.2210175</a></p>
</aside>
</aside>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T_s</strong> (<em>float</em>) – Sampling period (s).</p></li>
<li><p><strong>pars</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>U_inj</strong> (<em>float</em>) – Amplitude of the injected voltage (V).</p></li>
<li><p><strong>w_o</strong> (<em>float</em>) – PLL natural frequency (rad/s).</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl.current_ctrl">
<span class="sig-name descname"><span class="pre">current_ctrl</span></span><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl.current_ctrl" title="Permalink to this definition">#</a></dt>
<dd><p>Current controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.CurrentCtrl" title="motulator.control.sm.CurrentCtrl">CurrentCtrl</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl.speed_ctrl">
<span class="sig-name descname"><span class="pre">speed_ctrl</span></span><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl.speed_ctrl" title="Permalink to this definition">#</a></dt>
<dd><p>Speed controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../_common/index.html#motulator.control._common.SpeedCtrl" title="motulator.control._common.SpeedCtrl">SpeedCtrl</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl.current_ref">
<span class="sig-name descname"><span class="pre">current_ref</span></span><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl.current_ref" title="Permalink to this definition">#</a></dt>
<dd><p>Current reference generator.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.CurrentReference" title="motulator.control.sm.CurrentReference">CurrentReference</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl.pll">
<span class="sig-name descname"><span class="pre">pll</span></span><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl.pll" title="Permalink to this definition">#</a></dt>
<dd><p>Phase-locked loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="_signal_inj/index.html#motulator.control.sm._signal_inj.PhaseLockedLoop" title="motulator.control.sm._signal_inj.PhaseLockedLoop">PhaseLockedLoop</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl.signal_inj">
<span class="sig-name descname"><span class="pre">signal_inj</span></span><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl.signal_inj" title="Permalink to this definition">#</a></dt>
<dd><p>Signal injection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#motulator.control.sm.SignalInjection" title="motulator.control.sm.SignalInjection">SignalInjection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl.w_m_ref">
<span class="sig-name descname"><span class="pre">w_m_ref</span></span><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl.w_m_ref" title="Permalink to this definition">#</a></dt>
<dd><p>Speed reference (electrical rad/s).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjectionCtrl.pwm">
<span class="sig-name descname"><span class="pre">pwm</span></span><a class="headerlink" href="#motulator.control.sm.SignalInjectionCtrl.pwm" title="Permalink to this definition">#</a></dt>
<dd><p>Pulse-width modulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../_common/index.html#motulator.control._common.PWM" title="motulator.control._common.PWM">PWM</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motulator.control.sm.</span></span><span class="sig-name descname"><span class="pre">SignalInjection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">par</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">U_inj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_signal_inj.html#SignalInjection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.SignalInjection" title="Permalink to this definition">#</a></dt>
<dd><p>Estimate the rotor position error based on signal injection.</p>
<p>This signal injection method estimates the rotor position error based on
the injected switching frequency signal. The estimate can be used in a
phase-locked loop or in a state observer to robustify low-speed sensorless
operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par</strong> (<a class="reference internal" href="#motulator.control.sm.ModelPars" title="motulator.control.sm.ModelPars"><em>ModelPars</em></a>) – Machine model parameters.</p></li>
<li><p><strong>U_inj</strong> (<em>float</em>) – Injected voltage amplitude (V).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjection.output">
<span class="sig-name descname"><span class="pre">output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_sq</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_signal_inj.html#SignalInjection.output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.SignalInjection.output" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the rotor position estimation error.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T_s</strong> (<em>float</em>) – Sampling period (s).</p></li>
<li><p><strong>i_sq</strong> (<em>float</em>) – q-axis stator current (A) in estimated rotor coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>err</strong> – Rotor position estimation error (electrical rad).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjection.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_signal_inj.html#SignalInjection.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.SignalInjection.update" title="Permalink to this definition">#</a></dt>
<dd><p>Store the old current values for the next sampling period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>i_s</strong> (<em>complex</em>) – Stator current in estimated rotor coordinates.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motulator.control.sm.SignalInjection.filter_current">
<span class="sig-name descname"><span class="pre">filter_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/motulator/control/sm/_signal_inj.html#SignalInjection.filter_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#motulator.control.sm.SignalInjection.filter_current" title="Permalink to this definition">#</a></dt>
<dd><p>Filter the stator current using the previously measured value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>i_s</strong> (<em>complex</em>) – Unfiltered stator current (A) in estimated rotor coordinates.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>i_s_filt</strong> – Filtered stator current (A) in estimated rotor coordinates.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../im/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.control.im</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="../../model/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">motulator.model</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#package-contents">Package Contents</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#classes">Classes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars.i_sd_mtpa"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars.i_sd_mtpa</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars.tau_M_lim"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars.tau_M_lim</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReferencePars.i_sd_lim"><code class="docutils literal notranslate"><span class="pre">CurrentReferencePars.i_sd_lim</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReference"><code class="docutils literal notranslate"><span class="pre">CurrentReference</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReference.output"><code class="docutils literal notranslate"><span class="pre">CurrentReference.output()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentReference.update"><code class="docutils literal notranslate"><span class="pre">CurrentReference.update()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentCtrl"><code class="docutils literal notranslate"><span class="pre">CurrentCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.CurrentCtrl.output"><code class="docutils literal notranslate"><span class="pre">CurrentCtrl.output()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ModelPars"><code class="docutils literal notranslate"><span class="pre">ModelPars</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl"><code class="docutils literal notranslate"><span class="pre">VectorCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.current_ref"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.current_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.observer"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.observer</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.current_ctrl"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.current_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.speed_ctrl"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.speed_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.pwm"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.pwm</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.VectorCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">VectorCtrl.w_m_ref</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer"><code class="docutils literal notranslate"><span class="pre">Observer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.theta_m"><code class="docutils literal notranslate"><span class="pre">Observer.theta_m</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.w_m"><code class="docutils literal notranslate"><span class="pre">Observer.w_m</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.psi_s"><code class="docutils literal notranslate"><span class="pre">Observer.psi_s</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.psi_f"><code class="docutils literal notranslate"><span class="pre">Observer.psi_f</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.Observer.update"><code class="docutils literal notranslate"><span class="pre">Observer.update()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver"><code class="docutils literal notranslate"><span class="pre">FluxObserver</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver.delta"><code class="docutils literal notranslate"><span class="pre">FluxObserver.delta</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver.psi_s"><code class="docutils literal notranslate"><span class="pre">FluxObserver.psi_s</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxObserver.update"><code class="docutils literal notranslate"><span class="pre">FluxObserver.update()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.observer"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.observer</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.flux_torque_ref"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.flux_torque_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.speed_ctrl"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.speed_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.w_m_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxVectorCtrl.pwm"><code class="docutils literal notranslate"><span class="pre">FluxVectorCtrl.pwm</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReference"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReference</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReferencePars"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReferencePars</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReferencePars.psi_s_mtpa"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReferencePars.psi_s_mtpa</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.FluxTorqueReferencePars.tau_M_lim"><code class="docutils literal notranslate"><span class="pre">FluxTorqueReferencePars.tau_M_lim</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ObserverBasedVHzCtrl"><code class="docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ObserverBasedVHzCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrl.w_m_ref</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.ObserverBasedVHzCtrlPars"><code class="docutils literal notranslate"><span class="pre">ObserverBasedVHzCtrlPars</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.torque"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.torque()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.current"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.current()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.flux"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.flux()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpa"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpa()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv_current"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv_current()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpa_locus"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpa_locus()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv_locus"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv_locus()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.current_limit"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.current_limit()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.mtpv_and_current_limits"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.mtpv_and_current_limits()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_flux_loci"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_flux_loci()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_current_loci"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_current_loci()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_torque_current"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_torque_current()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.TorqueCharacteristics.plot_torque_flux"><code class="docutils literal notranslate"><span class="pre">TorqueCharacteristics.plot_torque_flux()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.current_ctrl"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.current_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.speed_ctrl"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.speed_ctrl</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.current_ref"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.current_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.pll"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.pll</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.signal_inj"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.signal_inj</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.w_m_ref"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.w_m_ref</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjectionCtrl.pwm"><code class="docutils literal notranslate"><span class="pre">SignalInjectionCtrl.pwm</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection"><code class="docutils literal notranslate"><span class="pre">SignalInjection</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection.output"><code class="docutils literal notranslate"><span class="pre">SignalInjection.output()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection.update"><code class="docutils literal notranslate"><span class="pre">SignalInjection.update()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#motulator.control.sm.SignalInjection.filter_current"><code class="docutils literal notranslate"><span class="pre">SignalInjection.filter_current()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aalto Electric Drives
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Aalto Electric Drives.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>